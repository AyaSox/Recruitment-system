# ?? QUICK TEST GUIDE - Real-Time Notifications

## ?? What to Test

You need to verify that **SignalR notifications work in real-time** when:
1. ? Applicant submits an application
2. ? Recruiter receives notification
3. ? Status is updated by recruiter
4. ? Applicant receives status update notification

---

## ? Quick Start

### Step 1: Start Backend
```powershell
# From solution root
cd ATSRecruitSys.Server
dotnet run
```

**Wait for**:
```
? Now listening on: https://localhost:7129
? Now listening on: http://localhost:5173
? Application started
```

---

### Step 2: Start Frontend
```powershell
# NEW TERMINAL - from solution root
cd atsrecruitsys.client
npm run dev
```

**Wait for**:
```
? VITE ready
? Local: http://localhost:5173/
```

---

## ?? Test Scenario 1: Application Submission

### Setup: Two Browser Windows

**Window 1** - Applicant (Regular browser):
```
URL: http://localhost:5173
Email: aya@gmail.com
Password: Password123!
```

**Window 2** - Recruiter (Incognito/Private mode):
```
URL: http://localhost:5173
Email: thabo.nkosi@atsrecruit.com
Password: Password123!
```

---

### Test Steps:

1. **In Window 1 (Applicant)**:
   ```
   ??????????????????????????????????????????
   ? 1. Click "Jobs" in sidebar             ?
   ? 2. Find any job (e.g., "Labour...")    ?
   ? 3. Click "Apply"                       ?
   ? 4. Upload resume (any PDF/DOCX)        ?
   ? 5. Click "Submit Application"          ?
   ??????????????????????????????????????????
   ```

2. **Watch BOTH Windows**:

   **Window 1 (Applicant)** should show:
   ```
   ? Success message: "Your application was submitted successfully!"
   ? Redirects to "My Applications"
   ? Bell icon: ??(1) ? Badge shows 1 unread
   ? Snackbar popup (top-right):
      ??????????????????????????????????????
      ? ?? APPLICATION STATUS UPDATE      ?
      ? Your application for Labour        ?
      ? Relations Specialist has been      ?
      ? updated to: Applied            [X] ?
      ??????????????????????????????????????
   ```

   **Window 2 (Recruiter)** should show **INSTANTLY**:
   ```
   ? Bell icon: ??(1) ? Badge shows 1 unread
   ? Snackbar popup (top-right):
      ??????????????????????????????????????
      ? ?? NEW APPLICATION                ?
      ? New application from Aya Sox       ?
      ? for Labour Relations Specialist[X] ?
      ??????????????????????????????????????
   ```

---

## ?? Test Scenario 2: Status Update Notification

### Test Steps:

1. **In Window 2 (Recruiter)**:
   ```
   ??????????????????????????????????????????
   ? 1. Click "Applications" in sidebar     ?
   ? 2. Find the application you just made  ?
   ? 3. Click "View Details"                ?
   ? 4. Change status to "Screening"        ?
   ? 5. Add notes: "Moving to screening"    ?
   ? 6. Click "Update Status"               ?
   ??????????????????????????????????????????
   ```

2. **Watch Window 1 (Applicant)**:

   Should show **INSTANTLY**:
   ```
   ? Bell icon: ??(2) ? Badge increments to 2
   ? Snackbar popup (top-right):
      ??????????????????????????????????????
      ? ?? APPLICATION STATUS UPDATE      ?
      ? Your application for Labour        ?
      ? Relations Specialist has been      ?
      ? updated to: Screening          [X] ?
      ??????????????????????????????????????
   ```

---

## ?? How to Check Notifications

### Click the Bell Icon ??

```
?????????????????????????????????????????????
?  Notifications (2 unread)                 ?
?????????????????????????????????????????????
?  ?? Application for Labour Relations      ?  • ? Blue dot
?     updated to: Screening                 ?
?     2:45 PM                               ?
?????????????????????????????????????????????
?  ?? Application for Labour Relations      ?  •
?     updated to: Applied                   ?
?     2:30 PM                               ?
?????????????????????????????????????????????
```

**Click a notification to mark it as read** ? Blue dot disappears

---

## ?? Troubleshooting

### ? Problem: No notification appears

#### Check 1: SignalR Connection (Frontend Console)
```javascript
// Press F12 ? Console

// ? Should see:
SignalR Connected successfully
User {userId} connected with connection ID {connectionId}

// ? If you see:
Error connecting to SignalR: 401 Unauthorized
? Solution: Clear localStorage, re-login
```

#### Check 2: Backend Logs
```bash
# Backend console should show:

? User {userId} connected with connection ID {connectionId}
? Notification of type application_status_update sent to user {userId}

# ? If missing:
? Solution: Restart backend, check Program.cs registration
```

#### Check 3: Network Tab
```bash
# Press F12 ? Network ? WS (WebSocket)

# ? Should see:
notificationHub - Status: 101 Switching Protocols

# ? If 404:
? Solution: Check backend is running on correct port
```

---

## ?? Expected Console Logs

### Frontend Console (F12)
```
? SignalR Connected successfully
? Notification received: {
    type: "application_status_update",
    data: {
      applicationId: 123,
      status: "Applied",
      jobTitle: "Labour Relations Specialist",
      message: "Your application for Labour Relations Specialist..."
    },
    timestamp: "2024-12-10T15:30:00Z"
  }
```

### Backend Console
```
? User abc123 connected with connection ID xyz789
? Notification of type application_status_update sent to user abc123
? Notification of type new_application sent to user recruiter456
```

---

## ? Success Criteria

Your test is successful if:

- [ ] ? Applicant sees snackbar popup after submitting application
- [ ] ? Recruiter sees snackbar popup instantly when application submitted
- [ ] ? Bell badge count updates automatically
- [ ] ? Status update triggers notification to applicant
- [ ] ? Notifications appear in dropdown list
- [ ] ? Clicking notification marks it as read
- [ ] ? Badge count decrements when notifications read

---

## ?? Visual Test Checklist

### Applicant Submits Application:
```
????????????????????????????????????????????????????????????
? BEFORE:                                                  ?
?   Applicant: ??(0)    Recruiter: ??(0)                  ?
????????????????????????????????????????????????????????????
? ACTION:                                                  ?
?   Applicant clicks "Submit Application"                  ?
????????????????????????????????????????????????????????????
? AFTER (instant):                                         ?
?   Applicant: ??(1) + Snackbar                           ?
?   Recruiter: ??(1) + Snackbar ? Real-time!              ?
????????????????????????????????????????????????????????????
```

### Recruiter Updates Status:
```
????????????????????????????????????????????????????????????
? BEFORE:                                                  ?
?   Applicant: ??(1)    Recruiter: ??(1)                  ?
????????????????????????????????????????????????????????????
? ACTION:                                                  ?
?   Recruiter changes status to "Screening"                ?
????????????????????????????????????????????????????????????
? AFTER (instant):                                         ?
?   Applicant: ??(2) + Snackbar ? Real-time!              ?
?   Recruiter: ??(1) (no change)                          ?
????????????????????????????????????????????????????????????
```

---

## ?? Quick Commands

### Start Everything:
```powershell
# Terminal 1 - Backend
cd ATSRecruitSys.Server
dotnet run

# Terminal 2 - Frontend
cd atsrecruitsys.client
npm run dev
```

### Test Credentials:
```
Applicant:
  Email: aya@gmail.com
  Password: Password123!

Recruiter:
  Email: thabo.nkosi@atsrecruit.com
  Password: Password123!

Admin:
  Email: admin@atsrecruitsys.com
  Password: Admin123!
```

---

## ?? Test Results Template

```
# Test Results - Real-Time Notifications

Date: ___________
Tester: ___________

## Test 1: Application Submission
- [ ] Applicant receives notification
- [ ] Recruiter receives notification
- [ ] Snackbar appears for both
- [ ] Badge count updates

## Test 2: Status Update
- [ ] Applicant receives notification
- [ ] Snackbar appears
- [ ] Badge count increments
- [ ] Email sent (check inbox)

## Test 3: Notification List
- [ ] Click bell icon opens dropdown
- [ ] All notifications visible
- [ ] Blue dots show unread
- [ ] Clicking marks as read
- [ ] Badge count updates

## Issues Found:
_____________________________________
_____________________________________

## Overall: ? PASS / ? FAIL
```

---

## ?? Expected Results

If everything works:

? Real-time notifications via WebSockets
? Instant updates (< 100ms latency)
? No page refresh needed
? Badge counts accurate
? Snackbar popups appear
? Email notifications sent
? Audit logs created

---

**Ready to test?** ??

Start both servers and follow the test scenarios above!
